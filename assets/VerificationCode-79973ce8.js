import{a as k,r as t,c as j,j as e,N as v,b as E,R as F,M as C,k as N,l as y}from"./index-96502477.js";import{I as R}from"./InputPulie-bd9d42a2.js";import{k as O,Q as c}from"./react-toastify.esm-95d81724.js";import"./index.esm-9df30f5e.js";function M(){const a=k(),[n,d]=t.useState(""),i=j(s=>s.Page.value);if(i==="")return e.jsx(v,{to:"/Login"});const x=E(),[m,w]=t.useState(""),[S,o]=t.useState(""),[g,p]=t.useState(""),u=j(s=>s.VerCode.value);if(t.useEffect(()=>{d(u)},[u]),localStorage.getItem("LogStatus")==="true")return e.jsx(v,{to:"/"});t.useState("");const[f,b]=t.useState(1),V=async()=>{if(n==m&&n.split(" ").join("")!=="")if(i==="Register"){o(""),x(C("VerCode"));const s=localStorage.getItem("FirstName"),l=localStorage.getItem("LastName"),r=localStorage.getItem("Email"),L=localStorage.getItem("Password");localStorage.setItem("FirstName",""),localStorage.setItem("LastName",""),localStorage.setItem("Password","");async function P(){await N.post(`${y}/CreateAccountMership239`,{FirstName:s,LastName:l,Email:r,Password:L}).then(h=>!!h.data.Inserted).catch(h=>!1)}P()?a("/Login"):(o(" "),p("Something went wrong please try again later!"))}else i==="ForgotPass"&&(x(C("VerCode")),o(""),a("/ConfirmPassword"));else o(" "),p("Verification code is wrong!")},I=async()=>{const s=localStorage.getItem("FirstName"),l=localStorage.getItem("Email");s.split(" ").join("")!==""&&l.split(" ").join("")!==""&&await N.post(`${y}/sendVerCodeAndGetCode`,{email:l,firstName1:s}).then(r=>{r.data.Sent?(d(r.data.verCode),b(f+1),c.success("Verification code sent successfully!",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})):c.error("We couldn't send the verification code!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})}).catch(r=>{c.error("Something went wrong!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})};return e.jsxs(F.Fragment,{children:[e.jsxs("div",{id:"__next","data-reactroot":"",children:[e.jsx("div",{className:"progress-loading",children:e.jsx("div",{className:""})}),e.jsx("div",{className:"reOverlay"}),e.jsxs("div",{className:"mx-auto box-border sdjhf78fsd4 flex w-full max-w-[90rem] flex-1 gap-28 px-24 xl:gap-14 xl:px-16 lg:px-12 md:px-8 xs:px-5 2xs:px-3",children:[e.jsx("div",{className:"relative flex w-form flex-col justify-start overflow-hidden px-0.5 py-10 xl:w-[26rem] lg:flex-1 lg:items-center",children:e.jsxs("div",{className:"flex flex-1 flex-col lg:w-full lg:self-start",children:[e.jsx("a",{className:"flex self-start",style:{cursor:"pointer"},children:e.jsx("img",{src:"https://capmership.s3.eu-north-1.amazonaws.com/smallLogo.png",alt:"logo",className:"h-13",onClick:()=>a("/Login")})}),e.jsxs("div",{className:" aduyadf786 flex flex-col mt-36 max-w-xl lg:w-full lg:justify-center lg:flex-1 lg:mt-24 md:mt-18 xs:mt-14 items-start",children:[e.jsx("h2",{className:"mb-4 tp-display4 lg:text-center sm:text-center",children:"Verification Code"}),e.jsxs("div",{className:"mb-13 flex xs:flex-col xs:gap-y-2 asd6723gsd",children:[e.jsx("p",{className:"tp-lead3 mr-2 text-gray-200 ",children:"Check your email for the verification code or"}),e.jsx("a",{className:"button group h-15 lg:h-14 xs:h-13 rounded-2xl xs:rounded-xl px-10 lg:px-9 xs:px-8 py-0 button-text !px-0 !py-0 !h-auto self-start",type:"submit",onClick:()=>a("/Login"),children:e.jsx("span",{className:" z-10 tp-h6 xs:tp-h7",children:"Login here"})})]}),e.jsxs("div",{className:"flex w-full flex-col gap-7",children:[e.jsx("div",{className:"grid gap-6 grid-cols-12",children:e.jsx("div",{className:"flex flex-col col-span-12",children:e.jsx("div",{style:{height:"52px"},children:e.jsx(R,{errorP:S,placeHolder:"your verification code here",valController:m,onChangeController:s=>w(s.target.value)})})})}),g!==""?e.jsx("div",{style:{marginTop:"-10px",marginLeft:"10px",color:"#FF6969"},children:g}):"",e.jsx("button",{className:"button group h-15 lg:h-14 xs:h-13 rounded-2xl xs:rounded-xl px-10 lg:px-9 xs:px-8 py-0 button-primary",type:"submit",onClick:V,children:e.jsx("span",{className:" z-10 tp-h6 xs:tp-h7",children:"Verify"})}),f<5?e.jsxs("div",{className:"resendCode",children:["Not received your code?"," ",e.jsxs("div",{style:{color:"#63E0FF",marginLeft:"10px",cursor:"pointer"},onClick:I,children:["Resend code"," "]})]}):""]})]})]})}),e.jsx("div",{className:"flex flex-1 items-center self-center py-10 lg:hidden sdkjf783",style:{minWidth:"350px"},children:e.jsx("img",{alt:"login_image",className:"max-h-[88vh] w-full rounded-[2.5rem] object-cover",src:"https://capmership.s3.eu-north-1.amazonaws.com/LogInPic.jpg"})})]}),e.jsx("div",{className:"Toastify"})]}),e.jsx(O,{})]})}export{M as default};
